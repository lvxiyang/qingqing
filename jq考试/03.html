<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./jquery.min.js"></script>
    <title>Document</title>
</head>

<body>
    <input type="checkbox" class="checkall">全选<button>反选</button>
    <br>
    <ul>
        <li><input type="checkbox" class="check">张三</li>
        <li><input type="checkbox" class="check">李四</li>
        <li><input type="checkbox" class="check">王五</li>
    </ul>
    <script>
        //     、用 jQuery 实现全选/反选功能，效果如图

        // 要求1：点击全选的checkbox，让下面所有人名前的checkbox的选中状态和全选的一致

        // 要求2：点击反选按钮，所有人名前的checkbox的选中状态取反

        // 要求3：点击所有人名前的checkbox，判断全选的选中状态

        // 要求4：代码规范

        // 点击全选
        $('.checkall').on('click', function () {
            // 复选框和全选保持一致
            $('.check').prop('checked', $('.checkall').prop('checked'))
        })
        // 点击反选
        $('button').on('click', function () {
            // 遍历所有小复选框，因为小复选框有的可能被选中，有的可能不选中
            $('.check').each(function (i, el) {
                // 拿到当前循环小复选框得选中状态
                var check = $(el).prop('checked');
                // 取反
                $(el).prop('checked', !check);
            })
            // 反选也需要检查一次,因为反选也可能造成所有小复选框选中或者未选中
            check();
        })
        // 点击小复选框判断全选是否选中
        $('.check').on('click', function () {
            check();
        })
        function check() {
            // 如果选中得复选框长度和所有小复选框长度一致，让全选框选中
            if ($('.check:checked').length == $('.check').length) {
                $('.checkall').prop('checked', true)
            } else {
                $('.checkall').prop('checked', false)
            }
        }
    </script>
</body>

</html>